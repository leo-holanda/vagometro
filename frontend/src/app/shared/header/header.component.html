<ng-container *ngIf="matchesMobileBreakpoint$ | async; else desktopTemplate">
  <div class="navbar bg-base-100 p-4">
    <div class="navbar-start">
      <a [routerLink]="['/stats']" class="btn btn-ghost text-xl">vagômetro</a>
    </div>

    <div class="navbar-center gap-2"></div>

    <div class="navbar-end">
      <button class="btn btn-ghost" (click)="menuModal.showModal()">
        <i class="bx bx-menu"></i>
      </button>

      <dialog #menuModal id="menuModal" class="modal modal-bottom">
        <div class="modal-box flex flex-col gap-4">
          <section class="flex flex-wrap items-end gap-2">
            <button class="btn mr-2 justify-start w-full" [routerLink]="['/busca-facil']">
              <i class="bx bx-search-alt"></i>
              <span> Busca fácil </span>
            </button>

            <button class="btn mr-2 justify-start w-full" (click)="jobSourcesModal.showModal()">
              <i class="bx bx-data"></i>
              <span> Mudar dados </span>
            </button>

            <button class="btn mr-2 justify-start w-full" (click)="contributionModal.showModal()">
              <i class="bx bxs-donate-heart"></i>
              <span> Apoiar </span>
            </button>
          </section>

          <section class="flex flex-wrap gap-2">
            <label class="btn flex-1 swap swap-rotate">
              <input type="checkbox" class="theme-controller" value="light" />

              <div class="swap-on">
                <i class="bx bxs-moon"></i>
              </div>

              <div class="swap-off">
                <i class="bx bxs-sun"></i>
              </div>
            </label>

            <a class="btn flex-1" href="https://github.com/leo-holanda/vagometro" target="_blank">
              <i class="bx bxl-github"></i>
            </a>

            <button class="btn flex-1" onclick="my_modal_1.showModal()">
              <i class="bx bxs-help-circle"></i>
            </button>
          </section>

          <section class="modal-action">
            <form class="w-full" method="dialog">
              <button class="btn w-full">
                <i class="bx bx-arrow-back"></i>
                Retornar
              </button>
            </form>
          </section>
        </div>
      </dialog>
    </div>
  </div>
</ng-container>

<ng-template #desktopTemplate>
  <div class="navbar bg-base-100 p-4">
    <div class="navbar-start">
      <a [routerLink]="['/stats']" class="btn btn-ghost text-xl">vagômetro</a>
    </div>
    <div class="navbar-center gap-2">
      <button class="btn mr-2" [routerLink]="['/busca-facil']">
        <i class="bx bx-search-alt"></i>
        <span> Busca fácil </span>
      </button>

      <button class="btn mr-2" (click)="jobSourcesModal.showModal()">
        <i class="bx bx-data"></i>
        <span> Mudar dados </span>
      </button>
    </div>

    <div class="navbar-end gap-2">
      <button class="btn mr-2" (click)="contributionModal.showModal()">
        <i class="bx bxs-donate-heart"></i>
        <span> Apoiar </span>
      </button>

      <label class="btn swap swap-rotate">
        <input type="checkbox" class="theme-controller" value="light" />

        <div class="swap-on">
          <i class="bx bxs-moon"></i>
        </div>

        <div class="swap-off">
          <i class="bx bxs-sun"></i>
        </div>
      </label>

      <a class="btn" href="https://github.com/leo-holanda/vagometro" target="_blank">
        <i class="bx bxl-github"></i>
      </a>

      <button class="btn" onclick="my_modal_1.showModal()">
        <i class="bx bxs-help-circle"></i>
      </button>
    </div>
  </div>
</ng-template>

<dialog id="my_modal_1" class="modal">
  <div class="modal-box">
    <main class="max-h-96 overflow-y-auto">
      <section class="p-4">
        <h1 class="font-bold text-lg">O que é o vagômetro?</h1>
        <p class="pt-2">
          O vagômetro é um projeto open-source que reúne dados sobre as vagas de emprego na área de
          tecnologia no Brasil.
        </p>

        <p class="pt-2">
          Seu objetivo é apresentar tais dados de forma a melhor embasar decisões profissionais, bem
          como facilitar a busca por vagas.
        </p>

        <p class="pt-2">
          Além disso, o vagômetro também realiza análises e comparações em diferentes intervalos de
          tempo para que seus usuários obtenham uma melhor compreensão do atual momento do mercado
          de vagas.
        </p>
      </section>

      <section class="p-4">
        <h1 class="font-extrabold text-xl">FAQ</h1>

        <div>
          <h2 class="font-bold text-lg">O que significa "Desconhecido?"</h2>

          <p class="pt-2">
            Para identificar, por exemplo, o nível de experiência requisitado nas vagas, é feito um
            match de palavras-chave como "Sênior", "Júnior" e várias outras.
          </p>

          <p class="pt-2">
            Caso não haja um match em pelo menos umas das palavras-chave, o status passa a ser
            Desconhecido.
          </p>

          <p class="pt-2">
            100% de precisão nem sempre é garantido pois erros na digitação da descrição da vaga
            podem prejudicar o match entre palavras-chave.
          </p>
        </div>

        <div class="mt-2">
          <h2 class="font-bold text-lg">Como as vagas são coletadas?</h2>

          <p class="pt-2">
            O vagômetro realiza consultas periódicas nas três fontes de vagas suportadas: Gupy,
            LinkedIn e GitHub. Os meios usados variam de requisições a APIs ou web scraping. De
            qualquer forma, todos os meios são considerados públicos.
          </p>
        </div>
      </section>

      <section class="p-4">
        <h1 class="font-bold text-lg">Aviso importante</h1>
        <p class="pt-2">
          O escopo das análises realizadas pelo vagômetro limitam-se apenas às vagas das fontes
          suportadas.
        </p>
        <p class="pt-2">
          Qualquer conclusão a respeito do mercado de TI como um todo é desencorajada devido ao
          tamanho restrito da amostra de dados.
        </p>
      </section>
    </main>

    <div class="modal-action">
      <form class="w-full" method="dialog">
        <button class="btn w-full">Fechar</button>
      </form>
    </div>
  </div>
</dialog>

<dialog #jobSourcesModal class="modal">
  <div class="modal-box">
    <header class="flex items-center gap-2 mb-4">
      <i class="bx bx-data"></i>
      <h1 class="text-lg font-bold text-balance">
        Selecione quais fontes de vagas você deseja ver
      </h1>
    </header>

    <vgm-job-source-selector [compactMode]="true"></vgm-job-source-selector>

    <div class="modal-action w-full">
      <form method="dialog" class="w-full">
        <button
          class="btn w-full"
          [ngClass]="{ 'btn-disabled': (hasOneJobSourceActive$ | async) === false }"
        >
          <i class="bx bx-stats"></i>
          Retornar para análise
        </button>
      </form>
    </div>
  </div>
</dialog>

<dialog #timeWindowModal class="modal">
  <div class="modal-box">
    <header class="flex items-center gap-2 mb-4">
      <i class="bx bxs-time-five"></i>
      <h1 class="text-lg font-bold text-balance">Selecione um intervalo de tempo</h1>
    </header>

    <div class="flex flex-wrap items-center gap-2">
      <button
        [ngClass]="{
          'btn-active': (currentTimeWindow$ | async) === timeWindows.today
        }"
        (click)="onTimeWindowClick(timeWindows.today)"
        class="btn btn-outline"
      >
        Hoje
      </button>

      <button
        [ngClass]="{
          'btn-active': (currentTimeWindow$ | async) === timeWindows.yesterday
        }"
        (click)="onTimeWindowClick(timeWindows.yesterday)"
        class="btn btn-outline"
      >
        Ontem
      </button>

      <button
        [ngClass]="{
          'btn-active': (currentTimeWindow$ | async) === timeWindows.week
        }"
        (click)="onTimeWindowClick(timeWindows.week)"
        class="btn btn-outline"
      >
        Semana
      </button>

      <button
        [ngClass]="{
          'btn-active': (currentTimeWindow$ | async) === timeWindows.month
        }"
        (click)="onTimeWindowClick(timeWindows.month)"
        class="btn btn-outline"
      >
        Mês
      </button>

      <button
        [ngClass]="{
          'btn-active': (currentTimeWindow$ | async) === timeWindows['6months']
        }"
        (click)="onTimeWindowClick(timeWindows['6months'])"
        class="btn btn-outline"
      >
        6 meses
      </button>

      <button
        [ngClass]="{
          'btn-active': (currentTimeWindow$ | async) === timeWindows.year
        }"
        (click)="onTimeWindowClick(timeWindows.year)"
        class="btn btn-outline"
      >
        1 ano
      </button>

      <button
        [ngClass]="{
          'btn-active': (currentTimeWindow$ | async) === timeWindows.all
        }"
        (click)="onTimeWindowClick(timeWindows.all)"
        class="btn btn-outline"
      >
        Sempre
      </button>
    </div>

    <div class="modal-action w-full">
      <form method="dialog" class="w-full">
        <button class="btn w-full">
          <i class="bx bx-arrow-back"></i>
          Retornar
        </button>
      </form>
    </div>
  </div>
</dialog>

<dialog #contributionModal class="modal">
  <div class="modal-box">
    <header class="flex items-center gap-2 mb-4">
      <i class="bx bxs-donate-heart"></i>
      <h1 class="text-lg font-bold text-balance">Apoie o vagômetro!</h1>
    </header>

    <main class="flex flex-col gap-4">
      <p>
        Se o vagômetro foi útil para você, considere apoiar o projeto! Sua contribuição ajudará o
        vagômetro a continuar funcionando e recebendo atualizações.
      </p>

      <div class="flex flex-col gap-2">
        <strong>Chave PIX</strong>
        <p>vagometrobr&#64;gmail.com</p>
      </div>

      <div class="flex flex-col gap-2">
        <strong>GitHub Sponsors </strong>
        <a class="link" href="https://github.com/sponsors/leo-holanda" target="_blank"
          >https://github.com/sponsors/leo-holanda</a
        >
      </div>

      <div class="flex flex-col gap-2">
        <strong>Kofi</strong>
        <a class="link" href="https://ko-fi.com/leoholanda" target="_blank"
          >https://ko-fi.com/leoholanda</a
        >
      </div>

      <div class="flex flex-col gap-2 mt-4">
        <strong>Você também pode contribuir...</strong>

        <a href="https://github.com/leo-holanda/vagometro" target="_blank">
          <button class="btn flex items-center justify-start flex-nowrap gap-2 w-full">
            <i class="bx bxl-github"></i>
            <span> Deixando uma estrela no repositório do GitHub </span>
          </button>
        </a>

        <button
          class="btn flex items-center justify-start flex-nowrap gap-2 w-full"
          (click)="copyLinkToClipboard()"
        >
          <i class="bx bxs-copy"></i>
          <p>Compartilhando o link com amigos</p>
        </button>
      </div>
    </main>

    <div class="modal-action w-full">
      <form method="dialog" class="w-full">
        <button class="btn w-full">
          <i class="bx bx-arrow-back"></i>
          Retornar
        </button>
      </form>
    </div>
  </div>
</dialog>
